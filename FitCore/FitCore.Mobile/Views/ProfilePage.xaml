<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FitCore.Mobile.Views.ProfilePage"
             BackgroundColor="#F6F6F6">

    <ScrollView>
        <VerticalStackLayout Spacing="0">

            <HorizontalStackLayout Padding="16" Spacing="12">
                
               <Label Text="Profilul meu"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="Black"
                       VerticalOptions="Center"/>

                <Label Text="ðŸ‘¤"
                       FontSize="20"
                       Grid.Column="1"
                       VerticalOptions="Center"/>
            </HorizontalStackLayout>

            <VerticalStackLayout Padding="20"
                                 Spacing="20">

                <!-- INFO USER -->
                <VerticalStackLayout Spacing="10"
                                     HorizontalOptions="Center">

                    <Frame WidthRequest="90"
                           HeightRequest="90"
                           CornerRadius="45"
                           BackgroundColor="#D6D6D6"
                           HasShadow="False">

                        <Label Text="ðŸ‘¤"
                               FontSize="42"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"/>
                    </Frame>

                    <Label Text="{Binding FullName}"
                           FontSize="20"
                           FontAttributes="Bold"
                           TextColor="#212121"/>

                    <Label Text="{Binding Email}"
                           FontSize="14"
                           TextColor="#757575"/>
                </VerticalStackLayout>

                <!-- CARD ABONAMENT -->
                <Frame Padding="16"
                       CornerRadius="4"
                       BackgroundColor="White"
                       HasShadow="False"
                       BorderColor="#D0D0D0"
                       IsVisible="{Binding HasMembership}">

                    <VerticalStackLayout Spacing="8">

                        <Label Text="STATUS ABONAMENT"
                               FontSize="13"
                               FontAttributes="Bold"
                               TextColor="#666"/>

                        <BoxView HeightRequest="1"
                                 BackgroundColor="#E0E0E0"/>

                        <Label Text="{Binding MembershipType.Name}"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="#212121"/>

                        <Label Text="{Binding MembershipType.Description}"
                               FontSize="14"
                               TextColor="#666"/>

                        <Label Text="{Binding MembershipEndDate,
                                       StringFormat='ExpirÄƒ: {0:dd MMM yyyy}'}"
                               FontSize="14"
                               TextColor="#212121"/>

                        <Frame BackgroundColor="#6CBF3A"
                               Padding="6,4"
                               CornerRadius="2"
                               HorizontalOptions="Start">

                            <Label Text="ACTIV"
                                   FontSize="12"
                                   FontAttributes="Bold"
                                   TextColor="White"/>
                        </Frame>

                    </VerticalStackLayout>
                </Frame>

                <!-- ALEGE ABONAMENT -->
                <VerticalStackLayout IsVisible="{Binding ShowMembershipChooser}"
                                     Spacing="12">

                    <Label Text="ALEGE ABONAMENT"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="#444"/>

                    <CollectionView x:Name="MembershipsView"
                                    SelectionMode="None">

                        <CollectionView.ItemTemplate>
                            <DataTemplate>

                                <Frame Padding="14"
                                       CornerRadius="4"
                                       BackgroundColor="White"
                                       HasShadow="False"
                                       BorderColor="#D0D0D0">

                                    <VerticalStackLayout Spacing="6">

                                        <Label Text="{Binding Name}"
                                               FontSize="16"
                                               FontAttributes="Bold"/>

                                        <Label Text="{Binding Description}"
                                               FontSize="13"
                                               TextColor="#666"/>

                                        <Grid ColumnDefinitions="*,Auto">

                                            <Label Text="{Binding Price,
                                                   StringFormat='{0} RON'}"
                                                   FontAttributes="Bold"/>

                                            <Button Text="REZERVÄ‚"
                                                    BackgroundColor="#FF6B00"
                                                    TextColor="White"
                                                    CornerRadius="2"
                                                    Padding="14,6"
                                                    CommandParameter="{Binding .}"
                                                    Clicked="OnSelectMembership"/>
                                        </Grid>

                                    </VerticalStackLayout>
                                </Frame>

                            </DataTemplate>
                        </CollectionView.ItemTemplate>

                    </CollectionView>
                </VerticalStackLayout>

                <!-- DATE PERSONALE -->
                <VerticalStackLayout Spacing="6">

                    <Label Text="DATE PERSONALE"
                           FontSize="13"
                           FontAttributes="Bold"
                           TextColor="#666"/>

                    <BoxView HeightRequest="1"
                             BackgroundColor="#E0E0E0"/>

                    <Label Text="{Binding Email}"
                           FontSize="14"
                           TextColor="#212121"/>
                </VerticalStackLayout>

                <!-- LOGOUT -->
                <Button Text="LOG OUT"
                        BackgroundColor="#B0B0B0"
                        TextColor="White"
                        HeightRequest="48"
                        CornerRadius="2"
                        HorizontalOptions="Fill"
                        Clicked="OnLogout"/>

            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
